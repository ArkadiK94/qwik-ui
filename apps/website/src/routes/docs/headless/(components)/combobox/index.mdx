---
title: Qwik UI | Combobox
---

import {
  Combobox,
  ComboboxLabel,
  ComboboxTrigger,
  ComboboxInput,
  ComboboxListbox,
  ComboboxOption,
} from '@qwik-ui/headless';

import { HeroExample, ParentComponent, StringCombobox, ObjectCombobox, CustomFilter, SortingExample, DisabledExample, CustomKeysExample, FlipExample, ShiftExample } from './examples';
import { CodeExample } from '../../../_components/code-example/code-example';
import { KeyboardInteractionTable } from '../../../_components/keyboard-interaction-table/keyboard-interaction-table';
import { APITable } from '../../../_components/api-table/api-table';
import { StatusBanner } from '../../../_components/status-banner/status-banner';
import {statusByComponent} from '../../../../../_state/component-statuses';
import { AnatomyTable } from '../../../_components/anatomy-table/anatomy-table';

<StatusBanner status={statusByComponent.headless.Combobox} />

# Combobox

#### A customizable text field with a listbox, enabling users to constrain a list of choices based on their search criteria.

{' '}

<HeroExample>
  ```tsx
  <Combobox class="relative text-white">
    <ComboboxLabel class="text-inherit font-semibold">
      Personal Trainers ‚ö°
    </ComboboxLabel>
    <ComboboxControl class="bg-[#1f2532] flex items-center rounded-sm border-[#7d95b3] border-[1px] relative">
      <ComboboxInput class="w-44 bg-inherit px-2 pr-6" />
      <ComboboxTrigger class="w-6 h-6 group absolute right-0">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke-width="2"
          class="stroke-white group-aria-expanded:-rotate-180 transition-transform duration-[450ms]"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </ComboboxTrigger>
    </ComboboxControl>
    <ComboboxPortal>
      <ComboboxListbox class="w-full bg-[#1f2532] px-4 py-2 mt-2 rounded-sm border-[#7d95b3] border-[1px]">
        {trainers.map((trainer, index) => (
          <ComboboxOption
            optionValue={trainer}
            key={index}
            class="rounded-sm px-2 hover:bg-[#496080] focus:bg-[#496080]"
          >
            {trainer}
          </ComboboxOption>
        ))}
      </ComboboxListbox>
    </ComboboxPortal>
  </Combobox>
  ```
</HeroExample>

Qwik UI's Combobox implementation follows the [WAI-Aria Combobox specifications](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/), along with some additional API's that enhance the flexibility, types, and performance.

<div class="mb-6 flex flex-col gap-2">
[View Source Code ‚ÜóÔ∏è](https://github.com/qwikifiers/qwik-ui/tree/main/packages/kit-headless/src/components/combobox)

[Report an issue üö®](https://github.com/qwikifiers/qwik-ui/issues)

[Edit This Page üóíÔ∏è](<https://github.com/qwikifiers/qwik-ui/edit/main/apps/website/src/routes/docs/headless/(components)/combobox/index.mdx>)

</div>

<br />

##### ‚ú® Features

- Full WAI-Aria compliance
- Full keyboard navigation
- Floating UI integration (listbox)
- Custom Autocomplete behavior
- Custom filter functionality
- Controlled or uncontrolled
- Supports disabled options
- Animatable, dynamic, and resumable

<br/>

> In Beta, we're currently supporting the **`Autocomplete`** configuration. We aim to support other combobox configurations according to our [roadmap](https://github.com/qwikifiers/qwik-ui/issues/405)

<br />

<div class="bg-red-200 dark:bg-red-900 p-4 lg:p-6 rounded-xl dark:border-[#F3F3F3] border-[#333333]">
  <p class="pb-4">The Combobox component makes use of <a class="border-b-2 !border-red-800 hover:!border-red-900" href="https://qwik.builder.io/docs/cookbook/portal/#portal">portals</a>. A basic use case for a portal is to prevent overflow issues in your UI. To support portals in Qwik UI, please add the following around your layout.tsx.</p>
  <CodeExample classes="!mb-0 !p-6 !rounded-md">
    ```tsx
    import { QwikUIProvider } from '@qwik-ui/headless'; // import Provider component

    // wrap as a direct child to the body tag
    <body>
      <QwikUIProvider>
        <slot />
      </QwikUIProvider>
    </body>
    ```
  </CodeExample>

  <div class="pt-12 pb-4">
    #### <ins>**Context Caveats**</ins>
    <p class="pt-2 pb-4">Portals are still currently in **Beta**, as a result, you may experience an issue using your own context to pass data into the portal children.</p>
    <p class="pb-4">If you do experience any context related issues, add the following **contextIds** prop to the **ComboboxPortal** component. It takes in an array of string context id's as a prop. We also have a live example below with context.</p>
    <p class="pb-4">If you are not using context inside the portal children, this will not be an issue.</p>

      <CodeExample classes="!mb-0 !p-6 !rounded-md">
      ```tsx
        <ComboboxPortal contextIds={["my-context-id", "my-context-id-2"]}>
          <ComboboxListbox>
            <ComboboxOption>Option</ComboboxOption>
          </ComboboxListbox>
        </ComboboxPortal> 
      ```
    </CodeExample>
  </div>
</div>

<br/>

## Building blocks

  <CodeExample>
    ```tsx
    import { component$ } from '@builder.io/qwik';
    import { Combobox, ComboboxLabel, ComboboxControl, ComboboxInput, ComboboxTrigger, ComboboxPortal, ComboboxListbox, ComboboxOption } from '@qwik-ui/headless';

    export default component$(() => {
      return (
        <Combobox renderOption$={() => (
            <ComboboxOption>
              Option
            </ComboboxOption>
          )}>
          <ComboboxLabel>Label Element</ComboboxLabel>
          <ComboboxControl>
            <ComboboxInput />
            <ComboboxTrigger>
              Opens Listbox
            </ComboboxTrigger>
          </ComboboxControl>
          <ComboboxPortal>
            <ComboboxListbox />
          </ComboboxPortal>
        </Combobox>
      )
    ```
  </CodeExample>

  ### üé® Anatomy
  <AnatomyTable
  propDescriptors={[
    {
      name: 'Combobox',
      description: 'The root container for the Combobox.',
    },
    {
      name: 'ComboboxLabel',
      description: 'A label element to connect to the Combobox.',
    },
    {
      name: 'ComboboxControl',
      description: `A container for the combobox trigger, and input.`,
    },
    {
      name: 'ComboboxInput',
      description: `An input element used for filtering, and controlling the combobox state.`,
    },
    {
      name: 'ComboboxTrigger',
      description: `A button that toggles the corresponding listbox when clicked.`,
    },
    {
      name: 'ComboboxPortal',
      description: `A portal component that teleports the children outside its parent when the listbox state is open.`,
    },
    {
      name: 'ComboboxListbox',
      description: `An unordered list that contains multiple options that display when opened.`,
    },
    {
      name: 'ComboboxOption',
      description: `A list item that is shown based on the listbox state and filter API.`,
    },
  ]}
/>

## Passing data

Qwik UI's Combobox supports **both** string and option data. Whether that's an array of strings, or an array of objects. To pass in data, add the `options` prop on the combobox root.

### String example

<StringCombobox>```tsx ```</StringCombobox>

Under the hood, the data passed in populates the listbox with options. To see options visually, add the `renderOption$` prop on the combobox root. This prop is a [QRL](https://qwik.builder.io/docs/advanced/qrl/#qrl), inside is a callback where the `ComboboxOption` component needs to be passed in.

### Object example

<ObjectCombobox>```tsx ```</ObjectCombobox>

The callback takes **two** parameters: 

- An object that holds the resolved option data.
- The option index.

The resolved object also holds:

- The key.
- Option Label.
- Option Value.
- Any disabled options.

Import the **ResolvedOption** type from Qwik UI and pass in the data according to the code block below.

<CodeExample>
  ```tsx
  import { ComboboxOption, type ResolvedOption } from '@qwik-ui/headless';

  renderOption$={(option: ResolvedOption, index: number) => (
    <ComboboxOption
      key={option.key}
      index={index}
      resolved={option}
    >
      {option.label}
    </ComboboxOption>
  )}
  ```
</CodeExample>

## Adding a filter

Out of the box, the Combobox comes with a default filter that uses the **string.includes** method to filter options. To add a custom filter, you can use the `filter$` QRL.

<CustomFilter>```tsx ```</CustomFilter>

In this example, the filter function retrieves the input value and options object. It then filters the options using the JavaScript `string.startsWith` method as part of our filter logic. However, you are not limited to this method. You can use any filtering method of your choice to customize the behavior to suit your needs.

### Sorting

In our previous example, you may have noticed that the country data wasn't sorted alphabetically. To sort options, add an additional sort method after the filter.

<SortingExample>```tsx ```</SortingExample>

## Disabled Behavior

There are two ways to indicate that an option is disabled:

- Using the default **disabled** key.
- Passing a unique key name using the **optionDisabledKey** prop.

<DisabledExample>```tsx ```</DisabledExample>

The **optionDisabledKey** prop does not need to be passed when there is a key already named disabled, OR you do not have any disabled options.

## Custom Key Names

As we saw previously with the **optionDisabledKey** prop, custom key names can also be passed in for values and labels.

<CustomKeysExample>```tsx ```</CustomKeysExample>

In some cases, your data object keys may not match the default keys that the Combobox component expects for option values and labels. By default, the Combobox component looks for keys named **value** for option values and **label** for option labels.

If your data object keys are different, you can specify custom key names using the `optionValueKey` and `optionLabelKey` props.

<CodeExample>
  ```tsx
    <Combobox
    options={myOptions}
    optionValueKey="pokedex"
    optionLabelKey="pokemon"
    optionDisabledKey="isPokemonCaught"
    />
  ```
</CodeExample>

Within our example, the value key is called **pokedex** and the label key is called **pokemon**. This tells the Combobox component to use the "pokedex" key for option values and the "pokemon" key for option labels.

> these props only need to be used if your data object keys **do not match** the default "value" and "label" keys. If your data object keys match these defaults, you do not need to pass in any custom keys.

## Customizing the Listbox

The `ComboboxListbox` component is seamlessly integrated with **Floating UI**, A JavaScript library designed for positioning elements that float and facilitating interactions with them.

This integration offers the flexibility to adapt the listbox to meet the specific requirements of the application.

### Flip

<FlipExample>```tsx ```</FlipExample>

Some Floating UI properties are enabled by default, such as the `flip` middleware. To turn off flip, you could add `flip={false}` on the listbox component.

### Consuming Floating UI

Suppose we want to use Floating UI's shift middleware on our Combobox Listbox to prevent overflow. In the floating UI docs, it looks like this:

<CodeExample>
  ```tsx
  import {computePosition, shift} from '@floating-ui/dom';
 
  computePosition(referenceEl, floatingEl, {
    middleware: [shift()],
  });
  ```
</CodeExample>

In this example, we are preventing overflow, while maintaining the desired placement when possible.

<ShiftExample>```tsx ```</ShiftExample>

Qwik UI handles all middleware and options under the hood. The Qwik UI equivalent would be:

<CodeExample>
  ```tsx
  // enabling the middleware
  <ComboboxListbox
    shift={true}
  />

  // fine-grained options
  <ComboboxListbox
    shift={{ mainAxis: true }}
  />
  ```
</CodeExample>

It also allows for specific object properties. Such as setting only the main axis to true.

> All floating UI options should be supported. If you don't know what options to add, here's a reference to the [Floating UI docs](https://floating-ui.com/)

## Passing context

<ParentComponent>```tsx ```</ParentComponent>

## Accessibility

### Keyboard interaction

<KeyboardInteractionTable keyDescriptors={
  [
    {
      keyTitle: 'Tab',
      description: 'Moves focus to the next focusable element or option.',
    },
    {
      keyTitle: 'Shift + Tab',
      description: 'Moves focus to the previous focusable element or option.',
    },
    {
      keyTitle: 'DownArrow',
      description: "Opens the listbox and moves focus to the first option. When focus is on an option, moves focus to the next option.  If there isn't one, it will go back to the first option.",
    },
    {
      keyTitle: 'UpArrow',
      description: "When focus is on an option, moves focus to the previous option. If there isn't one, it will go back to the last option.",
    },
    {
      keyTitle: 'Enter / Space',
      description: `Selects the option when focused. The listbox will close and the selected option becomes the input's value.`,
    },
    {
      keyTitle: 'Escape',
      description: 'Closes the listbox.',
    },
    {
      keyTitle: 'Home',
      description: 'When the input is focused, the cursor moves to the start of the input value. When focused on any listbox option, focus is moved to the first option.',
    },
    {
      keyTitle: 'End',
      description: 'When the input is focused, the cursor moves to the end of the input value. When focused on any listbox option, focus is moved to the last option.',
    },
    {
      keyTitle: 'Delete',
      description: 'When text is selected in the input, deletes the selected text.',
    },

]
}/>

Adheres to the [Combobox](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/) WAI-ARIA design pattern. See the W3C Editable Combobox With List Combobox Example for more information.

## API

By default, the API holds available attributes of both native DOM elements and custom Qwik elements. This is thanks to **QwikIntrinsicElements**. Here are some of the notable API's for this component.

### Combobox (Root)

<APITable
  propDescriptors={[
    {
      name: 'class',
      type: 'string',
      description: 'CSS classes to apply to the Combobox container.',
    },
    {
      name: 'style',
      type: 'string',
      description: 'inline CSS styles to apply to the Combobox container.',
    },
    {
      name: 'label',
      type: 'string',
      description: 'The label to give to the Combobox item.',
    },
    {
      name: 'onClick$',
      type: 'function',
      info: 'PropFunction<() => void>',
      description: 'A custom click handler',
    },
  ]}
/>
