---
title: Qwik UI | Combobox
---

import {
  Combobox,
  ComboboxLabel,
  ComboboxTrigger,
  ComboboxInput,
  ComboboxListbox,
  ComboboxOption,
} from '@qwik-ui/headless';

import { HeroExample, ContextExample, StringCombobox, ObjectCombobox, CustomFilter, SortingExample, DisabledExample, CustomKeysExample, DisableBlur, PlacementExample, FlipExample, GutterExample, HideExample, AnimationExample, AutoPlacementExample } from './examples';
import { CodeExample } from '../../../_components/code-example/code-example';
import { KeyboardInteractionTable } from '../../../_components/keyboard-interaction-table/keyboard-interaction-table';
import { APITable } from '../../../_components/api-table/api-table';
import { StatusBanner } from '../../../_components/status-banner/status-banner';
import {statusByComponent} from '../../../../../_state/component-statuses';
import { AnatomyTable } from '../../../_components/anatomy-table/anatomy-table';

<StatusBanner status={statusByComponent.headless.Combobox} />

# Combobox

A customizable text field with a listbox, enabling users to constrain a list of choices based on their search criteria.

{' '}

<HeroExample>
  ```tsx
  <Combobox class="relative text-white">
    <ComboboxLabel class="text-inherit font-semibold">
      Personal Trainers ‚ö°
    </ComboboxLabel>
    <ComboboxControl class="bg-[#1f2532] flex items-center rounded-sm border-[#7d95b3] border-[1px] relative">
      <ComboboxInput class="w-44 bg-inherit px-2 pr-6" />
      <ComboboxTrigger class="w-6 h-6 group absolute right-0">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke-width="2"
          class="stroke-white group-aria-expanded:-rotate-180 transition-transform duration-[450ms]"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </ComboboxTrigger>
    </ComboboxControl>
    <ComboboxPortal>
      <ComboboxListbox class="w-full bg-[#1f2532] px-4 py-2 mt-2 rounded-sm border-[#7d95b3] border-[1px]">
        {trainers.map((trainer, index) => (
          <ComboboxOption
            optionValue={trainer}
            key={index}
            class="rounded-sm px-2 hover:bg-[#496080] focus:bg-[#496080]"
          >
            {trainer}
          </ComboboxOption>
        ))}
      </ComboboxListbox>
    </ComboboxPortal>
  </Combobox>
  ```
</HeroExample>

Qwik UI's Combobox implementation follows the [WAI-Aria Combobox specifications](https://www.w3.org/WAI/ARIA/apg/patterns/combobox/), along with some additional API's that enhance the flexibility, types, and performance.

<div class="mb-6 flex flex-col gap-2">
[View Source Code ‚ÜóÔ∏è](https://github.com/qwikifiers/qwik-ui/tree/main/packages/kit-headless/src/components/combobox)

[Report an issue üö®](https://github.com/qwikifiers/qwik-ui/issues)

[Edit This Page üóíÔ∏è](<https://github.com/qwikifiers/qwik-ui/edit/main/apps/website/src/routes/docs/headless/(components)/combobox/index.mdx>)

</div>

<br />

#### ‚ú® Features

- Full WAI-Aria compliance
- Full keyboard navigation
- Floating UI integration (listbox)
- Custom Autocomplete behavior
- Custom filter functionality
- Controlled or uncontrolled
- Supports disabled options
- Animatable, dynamic, and resumable

<br/>

> In Beta, we're currently supporting the **`Autocomplete`** configuration. We aim to support other combobox configurations according to our [roadmap](https://github.com/qwikifiers/qwik-ui/issues/405)

<br />

<div class="bg-red-200 dark:bg-red-900 p-4 lg:p-6 rounded-xl dark:border-[#F3F3F3] border-[#333333] shadow-light-medium dark:shadow-dark-medium">
  <p class="pb-4">The Combobox component makes use of <a class="border-b-2 !border-red-800 hover:!border-red-900" href="https://qwik.builder.io/docs/cookbook/portal/#portal">portals</a>. A basic use case for a portal is to prevent overflow issues in your UI. To support portals in Qwik UI, please add the following around your layout.tsx.</p>
  <CodeExample classes="!mb-0 !p-6 !rounded-md">
    ```tsx
    import { QwikUIProvider } from '@qwik-ui/headless'; // import Provider component

    // wrap as a direct child to the body tag
    <body>
      <QwikUIProvider>
        <slot />
      </QwikUIProvider>
    </body>
    ```
  </CodeExample>

  <div class="pt-12 pb-4">
    #### <ins>**Context Caveats**</ins>
    <p class="pt-2 pb-4">Portals are still currently in **Beta**, as a result, you may experience an issue using your own context to pass data into the portal children.</p>
    <p class="pb-4">If you do experience any context related issues, add the following **contextIds** prop to the **ComboboxPortal** component. It takes in an array of string context id's as a prop. We also have a live example below with context.</p>
    <p class="pb-4">If you are not using context inside the portal children, this will not be an issue.</p>

      <CodeExample classes="!mb-0 !p-6 !rounded-md">
      ```tsx
        <ComboboxPortal contextIds={["my-context-id", "my-context-id-2"]}>
          <ComboboxListbox>
            <ComboboxOption>Option</ComboboxOption>
          </ComboboxListbox>
        </ComboboxPortal> 
      ```
    </CodeExample>
  </div>
</div>

<br/>

## Building blocks

  <CodeExample>
    ```tsx
    import { component$ } from '@builder.io/qwik';
    import { Combobox, ComboboxLabel, ComboboxControl, ComboboxInput, ComboboxTrigger, ComboboxPortal, ComboboxListbox, ComboboxOption } from '@qwik-ui/headless';

    export default component$(() => {
      return (
        <Combobox>
          <ComboboxLabel>Label Element</ComboboxLabel>
          <ComboboxControl>
            <ComboboxInput />
            <ComboboxTrigger>
              Opens Listbox
            </ComboboxTrigger>
          </ComboboxControl>
          <ComboboxPortal>
            <ComboboxListbox 
            optionRenderer$={() => (
              <ComboboxOption>
                Option Label
              </ComboboxOption>
            )} />
          </ComboboxPortal>
        </Combobox>
      )
    ```
  </CodeExample>

  ### üé® Anatomy
  <AnatomyTable
  propDescriptors={[
    {
      name: 'Combobox',
      description: 'The root container for the Combobox.',
    },
    {
      name: 'ComboboxLabel',
      description: 'A label element to connect to the Combobox.',
    },
    {
      name: 'ComboboxControl',
      description: `A container for the combobox trigger, and input.`,
    },
    {
      name: 'ComboboxInput',
      description: `An input element used for filtering, and controlling the combobox state.`,
    },
    {
      name: 'ComboboxTrigger',
      description: `A button that toggles the corresponding listbox when clicked.`,
    },
    {
      name: 'ComboboxPortal',
      description: `A portal component that teleports the children outside its parent when the listbox state is open.`,
    },
    {
      name: 'ComboboxListbox',
      description: `An unordered list that contains multiple options that display when opened.`,
    },
    {
      name: 'ComboboxOption',
      description: `A list item that is shown based on the listbox state and filter API.`,
    },
  ]}
/>

## Passing data

Qwik UI's Combobox supports **both** string and option data. Whether that's an array of strings, or an array of objects. To pass in data, add the `options` prop on the Combobox Root.

### String example

<StringCombobox>```tsx ```</StringCombobox>

Under the hood, the data passed in populates the listbox with options. To see options visually, add the `renderOption$` prop on the Combobox Listbox. This prop is a [QRL](https://qwik.builder.io/docs/advanced/qrl/#qrl), inside is a callback where the `ComboboxOption` component needs to be passed in.

### Object example

<ObjectCombobox>```tsx ```</ObjectCombobox>

The callback takes **two** parameters: 

- An object that holds the resolved option data.
- The option index.

The resolved object also holds:

- The key.
- Option Label.
- Option Value.
- Any disabled options.

Import the **ResolvedOption** type from Qwik UI and pass in the data according to the code block below.

<CodeExample>
  ```tsx
  import { ComboboxOption, type ResolvedOption } from '@qwik-ui/headless';

  renderOption$={(option: ResolvedOption, index: number) => (
    <ComboboxOption
      key={option.key}
      index={index}
      resolved={option}
    >
      {option.label}
    </ComboboxOption>
  )}
  ```
</CodeExample>

## Adding a filter

Out of the box, the Combobox comes with a default filter that uses the **string.includes** method to filter options. To add a custom filter, you can use the `filter$` QRL.

<CustomFilter>```tsx ```</CustomFilter>

In this example, the filter function retrieves the input value and options object. It then filters the options using the JavaScript `string.startsWith` method as part of our filter logic. However, you are not limited to this method. You can use any filtering method of your choice to customize the behavior to suit your needs.

### Sorting

In our previous example, you may have noticed that the country data wasn't sorted alphabetically. To sort options, add an additional sort method after the filter.

<SortingExample>```tsx ```</SortingExample>

## Disabled Behavior

There are two ways to indicate that an option is disabled:

- Using the default **disabled** key.
- Passing a unique key name using the **optionDisabledKey** prop.

<DisabledExample>```tsx ```</DisabledExample>

The **optionDisabledKey** prop does not need to be passed when there is a key already named disabled, OR you do not have any disabled options.

## Custom Key Names

As we saw previously with the **optionDisabledKey** prop, custom key names can also be passed in for values and labels.

<CustomKeysExample>```tsx ```</CustomKeysExample>

In some cases, your data object keys may not match the default keys that the Combobox component expects for option values and labels. By default, the Combobox component looks for keys named **value** for option values and **label** for option labels.

If your data object keys are different, you can specify custom key names using the `optionValueKey` and `optionLabelKey` props.

<CodeExample>
  ```tsx
    <Combobox
    options={myOptions}
    optionValueKey="pokedex"
    optionLabelKey="pokemon"
    optionDisabledKey="isPokemonCaught"
    />
  ```
</CodeExample>

Within our example, the value key is called **pokedex** and the label key is called **pokemon**. This tells the Combobox component to use the "pokedex" key for option values and the "pokemon" key for option labels.

> these props only need to be used if your data object keys **do not match** the default "value" and "label" keys. If your data object keys match these defaults, you do not need to pass in any custom keys.

## Configuring the Input

### Disabling Blur

The Qwik UI Combobox uses the `onBlur$ event` on the input to close the listbox when interacting with other elements.

<DisableBlur>```tsx ```</DisableBlur>

This can get tedious if certain custom behavior needs to be added, or the listbox needs to be inspected in the dev tools. 

To disable this behavior, set `disableBlur={true}` on the Input.

## **Configuring the Listbox**

The `ComboboxListbox` component is designed for positioning elements that float and facilitating interactions with them. The listbox is highly configurable, here are some example use cases:

### Placement

To set the default position of the listbox, you can use the `placement` prop. In the example below, we've set placement to top. When the user opens the listbox, it will be above the input.

<PlacementExample>```tsx ```</PlacementExample>

The default placement is **bottom**.

### Flip

Allows the listbox to flip its position based on available space. It's enabled by default, but can be disabled by adding `flip={false}` on the listbox.

<FlipExample>```tsx ```</FlipExample>
  
{
/* commented out for now
#### Shift
  
Enables the listbox to shift its position to prevent overflow.

<ShiftExample>```tsx ```</ShiftExample>
*/
}

### Gutter
  
In the previous docs examples, we use the gutter property on the listbox. Gutter is the space between the input and the floating element.

<GutterExample>```tsx ```</GutterExample>

If Flip is enabled, it will provide a gutter space for both the top and bottom.

### Hide

<HideExample>```tsx ```</HideExample>
  
Allows hiding the listbox.

### Animations

<AnimationExample>```tsx ```</AnimationExample>
  
#### Transform
  
Enables transforming the listbox for custom animations and transitions.

In this example, we are preventing overflow, while maintaining the desired placement when possible.

## Customizing State Signals

The Combobox component allows you to customize its state signals. This can be useful if you want to control or observe these states externally. 

This involves creating a signal and passing it in using the [bind syntax](https://qwik.builder.io/docs/components/rendering/#bind-attribute), such as in the Qwik docs.

<APITable
  propDescriptors={[
    {
      name: 'bind:isListboxOpenSig',
      type: 'Signal',
      description: 'Controls the open state of the listbox.',
    },
    {
      name: 'bind:isInputFocusedSig',
      type: 'Signal',
      description: 'Controls the focus state of the input.',
    },
    {
      name: 'bind:isTriggerFocusedSig',
      type: 'Signal',
      description: 'Controls the focus state of the trigger.',
    },
    {
      name: 'bind:inputValueSig',
      type: 'Signal',
      description: 'Controls the current value of the input.',
    },
  ]}
/>

Here is an example of how to customize these signals:


## Passing context

<ContextExample>```tsx ```</ContextExample>

## **Keyboard interactions**

<KeyboardInteractionTable keyDescriptors={
  [
    {
      keyTitle: 'Enter',
      description: `Selects the highlighted option. The listbox closes and the selected option becomes the input's value.`
    },
    {
      keyTitle: 'Down Arrow',
      description: `Opens the listbox and shifts focus to the first option. If focus is already on an option, it moves to the next one. If no next option exists, focus returns to the first option.`,
    },
    {
      keyTitle: 'Up Arrow',
      description: `If focus is on an option, it moves to the previous option. If no previous option exists, focus moves to the last option.`,
    },
    {
      keyTitle: 'Escape',
      description: `Closes the listbox.`,
    },
    {
      keyTitle: 'Home',
      description: `Moves the cursor to the start of the input value when the input is focused. When any listbox option is focused, focus shifts to the first enabled option.`,
    },
    {
      keyTitle: 'End',
      description: `Moves the cursor to the end of the input value when the input is focused. When any listbox option is focused, focus shifts to the last enabled option.`,
    },
    {
      keyTitle: 'Delete',
      description: `Deletes the selected text in the input.`,
    },

]
}/>

## API

By default, the API holds available attributes of both native DOM elements and custom Qwik elements. This is thanks to **QwikIntrinsicElements**. Here are some of the notable API's for this component.

### Combobox (Root)

<APITable
  propDescriptors={[
    {
      name: 'class',
      type: 'string',
      description: 'CSS classes to apply to the Combobox container.',
    },
    {
      name: 'style',
      type: 'string',
      description: 'inline CSS styles to apply to the Combobox container.',
    },
    {
      name: 'label',
      type: 'string',
      description: 'The label to give to the Combobox item.',
    },
    {
      name: 'onClick$',
      type: 'function',
      info: 'PropFunction<() => void>',
      description: 'A custom click handler',
    },
  ]}
/>

## Additional Examples

#### Auto Placement
  
Automatically places the listbox based on available space. **You must set flip to false before using it.**  This comes in handy when you're unsure about the optimal placement for the floating element, or if you prefer not to set it manually.

<AutoPlacementExample>```tsx ```</AutoPlacementExample>

<div class="bg-red-200 dark:bg-red-900 p-4 lg:p-6 rounded-xl dark:border-[#F3F3F3] border-[#333333] shadow-light-medium dark:shadow-dark-medium">
  **NOTE:** You cannot use **flip** and **autoPlacement** at the same time. They both manipulate the placement but with different strategies. Using both can result in a continuous reset loop as they try to override each other's work.
</div>

